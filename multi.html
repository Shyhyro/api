<!DOCTYPE html>
<html>
<head>
    <title>Realmerge - Multi</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta property="og:title" content="Realmerge Multi"/>
    <meta property="og:description" content="Simple tool that layers files from the Horse Reality webgame."/>
    <meta property="og:image" content="https://realmerge.shay.cat/static/promo-og-light-bg-1.png"/>
    <meta property="twitter:card" content="summary_large_image"/>
    <meta name="theme-color" content="#081b28"/>
    <link rel="stylesheet" href="/static/style.css"/>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <script src="/static/main.js"></script>
    <script src="/static/multi.js"></script>
    <script src="/static/theme.js"></script>
    <script src="/static/settings.js"></script>
</head>
<body>
<iframe style="display:none" name="hide-form-req"></iframe>
<div id="settings-modal-container"></div>
<noscript><div class="box" style="padding-bottom:20px;border-color:red"><h3 class="box-title">Fatal</h3><p>Realmerge requires JavaScript to function properly. Please enable JavaScript for this site in your browser's settings.</p></div></noscript>
<div class="box">
    <h3 class="box-title">Realmerge (Multi Mode)</h3>
    <form target="hide-form-req" action="/api/eat" method="POST" onsubmit="getLayers();">
        <input required pattern="^https:\/\/(v2\.|www\.)?horsereality\.(com|nl)\/horses\/(\d{3,10})\/.*" type="url" name="url" id="horseurl" placeholder="https://horsereality.com/horses/...">
        <button type="submit">Add</button>
        <br>
        <input type="checkbox" name="use-foal" id="use-foal" onclick="this.state=!this.state;">
        <script>const box = document.querySelector('#use-foal');box.state = box.checked  // set initial state</script>
        <label for="use-foal" style="font-size: 0.9em;">Use foal instead of mare</label>
    </form>
</div>
<div class="box" id="error-box" style="padding-bottom:20px;display:none;border-color:red"><h3 class="box-title">Error</h3><p id="error-message"></p></div>
<div class="box-holder" id="box-holder"></div>
<div class="box" id="preview-box" style="padding-bottom:20px;height:498px;display:none;position:relative"><div id="preview-titlebar"><h3>Preview</h3></div></div>
<div class="box" id="merged-image-box" style="padding-bottom:20px;display:none"><h3 class="box-title" id="merged-image-title"></h3><img id="merged-image" src=""></div>
<div class="footer-credit-container">
<div style="display:inline-flex;left: 0;position: absolute;margin-top: -35px;">
    <button onclick="spawnSettings()">🔧 Settings</button>
    <div class="new-badge">NEW!</div>
</div>
<div style="display:inline-flex;left: 0;position: absolute;margin-top: -35px;margin-left: 110px;">
    <div id="nav-drop-up">
        <div onclick="toggleNav()"><a href="/">🐴 Main Page</a></div>
        <div onclick="toggleNav()"><a href="/multi">🔗 Multi Mode</a></div>
        <div onclick="toggleNav()"><a href="/changelog">📃 Changelog</a></div>
    </div>
    <button onclick="toggleNav()">📜 Navigation</button>
    <div class="new-badge">NEW!</div>
</div>
<div class="footer-credit">
    <h5 style="margin:0">🔗 All images © <a href="https://deloryan.com" target="_blank">Deloryan B.V.</a></h5>
    <h5 style="margin:0">🔗 Source on <a href="https://github.com/shayypy/realmerge" target="_blank">GitHub</a>. Realmerge © shay (shayypy)</h5>
</div>
<div class="footer-credit" id="extension-ad-chromium" style="display:none">
    <h5 style="margin:0">Realmerge has a browser extension! <a href="/chrome" target="_blank">You can add it here :)</a></h5>
</div>
<div class="footer-credit" id="extension-ad-firefox" style="display:none">
    <h5 style="margin:0">Realmerge has a browser extension! <a href="/firefox" target="_blank">You can add it here :)</a></h5>
</div>
</div>
<script>
    if (window.chrome) {
        document.getElementById('extension-ad-chromium').style.display = 'block';
    } else if (navigator.userAgent.indexOf("Firefox") >= 0) {
        document.getElementById('extension-ad-firefox').style.display = 'block';
    }

    const previewBox = document.querySelector('#preview-box');
    function changePreviewHeight() {
        // janky hack mate
        const bottomLayer = previewBox.children[1];
        if (!bottomLayer) {return};
        previewBox.style.height = bottomLayer.height + 'px';
        for (const layer of [...previewBox.children].slice(2)) {
            layer.style.height = bottomLayer.height + 'px';
            layer.style.width = bottomLayer.width + 'px';
        }
    }
    window.onresize = changePreviewHeight;
</script>
</body>
</html>
